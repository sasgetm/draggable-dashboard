{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createBlock as _createBlock, resolveDirective as _resolveDirective, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = {\n  class: \"dashboard\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"Дашборд\", -1 /* HOISTED */);\nconst _hoisted_3 = {\n  class: \"header\"\n};\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"Страница с постами\", -1 /* HOISTED */);\nconst _hoisted_5 = {\n  class: \"app__btns\"\n};\nconst _hoisted_6 = {\n  class: \"pagination\"\n};\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"div\", null, [/*#__PURE__*/_createElementVNode(\"p\", null, \"Идет загрузка\")], -1 /* HOISTED */);\nconst _hoisted_9 = {\n  class: \"observer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_my_button = _resolveComponent(\"my-button\");\n  const _component_cards_list = _resolveComponent(\"cards-list\");\n  const _component_my_input = _resolveComponent(\"my-input\");\n  const _component_my_select = _resolveComponent(\"my-select\");\n  const _component_post_form = _resolveComponent(\"post-form\");\n  const _component_my_dialog = _resolveComponent(\"my-dialog\");\n  const _component_post_list = _resolveComponent(\"post-list\");\n  const _directive_intersection = _resolveDirective(\"intersection\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_hoisted_2, _createVNode(_component_my_button, {\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.$router.push('/add-cards'))\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Добавить\")]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_cards_list)]), _createElementVNode(\"div\", null, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createCommentVNode(\" <my-button\\n        @click=\\\"fetchPosts\\\"\\n      >Получить посты</my-button> \"), _createVNode(_component_my_input, {\n    placeholder: \"Найти пост\",\n    modelValue: $data.searchQuery,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.searchQuery = $event)\n  }, null, 8 /* PROPS */, [\"modelValue\"]), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_my_button, {\n    onClick: $options.showDialog\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Создать пост\")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_my_select, {\n    modelValue: $data.selectedSort,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.selectedSort = $event),\n    options: $data.sortOptions\n  }, null, 8 /* PROPS */, [\"modelValue\", \"options\"])])]), _createVNode(_component_my_dialog, {\n    show: $data.dialogVisible,\n    \"onUpdate:show\": _cache[3] || (_cache[3] = $event => $data.dialogVisible = $event)\n  }, {\n    default: _withCtx(() => [_createVNode(_component_post_form, {\n      onCreate: $options.createPost\n    }, null, 8 /* PROPS */, [\"onCreate\"]), _createCommentVNode(\" kebab-case \")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"show\"]), _createElementVNode(\"div\", _hoisted_6, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.totalPages, pageNumber => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: pageNumber,\n      class: _normalizeClass([\"pagination__item\", {\n        'pagination__item_current': $data.page === pageNumber\n      }]),\n      onClick: $event => $options.changePage(pageNumber)\n    }, _toDisplayString(pageNumber), 11 /* TEXT, CLASS, PROPS */, _hoisted_7);\n  }), 128 /* KEYED_FRAGMENT */))]), !$data.isPostsLoading ? (_openBlock(), _createBlock(_component_post_list, {\n    key: 0,\n    posts: $options.sortedAndSearchedPosts,\n    onRemove: $options.removePost\n  }, null, 8 /* PROPS */, [\"posts\", \"onRemove\"])) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 1\n  }, [_createCommentVNode(\" <PostList v-bind:posts=\\\"posts\\\" /> - не сокращенная запись \"), _hoisted_8], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)), _withDirectives(_createElementVNode(\"div\", _hoisted_9, null, 512 /* NEED_PATCH */), [[_directive_intersection, $options.loadMorePosts]])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementVNode","_createElementBlock","_Fragment","_hoisted_1","_hoisted_2","_createVNode","_component_my_button","onClick","_cache","$event","_ctx","$router","push","default","_withCtx","_createTextVNode","_","_component_cards_list","_hoisted_3","_hoisted_4","_createCommentVNode","_component_my_input","placeholder","modelValue","$data","searchQuery","_hoisted_5","$options","showDialog","_component_my_select","selectedSort","options","sortOptions","_component_my_dialog","show","dialogVisible","_component_post_form","onCreate","createPost","_hoisted_6","_renderList","totalPages","pageNumber","key","_normalizeClass","page","changePage","_hoisted_7","isPostsLoading","_createBlock","_component_post_list","posts","sortedAndSearchedPosts","onRemove","removePost","_hoisted_8","_hoisted_9","loadMorePosts"],"sources":["/Users/a123/Documents/делание/тестовые задания/2024/аналитикум плюс челябинск vue dashboard/dashboard/src/pages/Main.vue"],"sourcesContent":["<template>\n  <div class=\"dashboard\">\n    <h1>Дашборд</h1>\n    <my-button @click=\"$router.push('/add-cards')\">Добавить</my-button>\n    <cards-list></cards-list>\n  </div>\n\n\n  <div>\n    <div class=\"header\">\n      <h1>Страница с постами</h1>\n      <!-- <my-button\n        @click=\"fetchPosts\"\n      >Получить посты</my-button> -->\n      <my-input placeholder=\"Найти пост\" v-model=\"searchQuery\"></my-input>\n\n      <div class=\"app__btns\">\n        <my-button\n          @click=\"showDialog\"\n        >Создать пост</my-button>\n        <my-select\n          v-model=\"selectedSort\"\n          :options=\"sortOptions\"\n        ></my-select>\n      </div>\n    </div>\n\n    <my-dialog v-model:show=\"dialogVisible\">\n      <post-form\n        @create=\"createPost\"\n      /><!-- kebab-case -->\n    </my-dialog>\n\n    <div class=\"pagination\">\n      <div\n        v-for=\"pageNumber in totalPages\"\n        :key=\"pageNumber\"\n        class=\"pagination__item\"\n        :class=\"{\n          'pagination__item_current': page === pageNumber,\n        }\"\n        @click=\"changePage(pageNumber)\"\n      >\n        {{ pageNumber }}\n      </div>\n    </div>\n\n    <post-list\n      :posts=\"sortedAndSearchedPosts\"\n      @remove=\"removePost\"\n      v-if=\"!isPostsLoading\"\n    /><!-- <PostList v-bind:posts=\"posts\" /> - не сокращенная запись -->\n    <div v-else>\n      <p>Идет загрузка</p>\n    </div>\n\n    <div v-intersection=\"loadMorePosts\" class=\"observer\"></div>\n  </div>\n</template>\n\n<script>\nimport PostForm from '@/components/PostForm';\nimport PostList from '@/components/PostList';\nimport axios from 'axios';\n\nexport default {\n  components: {\n    PostForm, PostList\n  },\n  data() {\n    return {\n      posts: [],\n      dialogVisible: false,\n      isPostsLoading: false,\n      selectedSort: '',\n      sortOptions: [\n        {\n          value: 'title',\n          name: 'По заголовку',\n        },\n        {\n          value: 'body',\n          name: 'По содержанию',\n        },\n      ],\n      searchQuery: '',\n      page: 1,\n      limit: 10,\n      totalPages: 0,\n    }\n  },\n  methods: {\n    createPost(post) {\n      this.posts.push(post);\n      this.dialogVisible = false;\n    },\n    removePost(post) {\n      this.posts = this.posts.filter(p => p.id !== post.id)\n    },\n    showDialog() {\n      this.dialogVisible = true;\n    },\n    async fetchPosts() {\n      console.log('one');\n      try {\n        this.isPostsLoading = true;\n        const response = await axios.get('https://jsonplaceholder.typicode.com/posts', {\n          params: {\n            _page: this.page,\n            _limit: this.limit,\n          }\n        });\n        this.totalPages = Math.ceil(response.headers['x-total-count'] / this.limit);\n        this.posts = response.data;\n      } catch (error) {\n        alert('Ошибка');\n        console.log(error);\n      } finally {\n        this.isPostsLoading = false;\n      }\n    },\n    async loadMorePosts() {\n      console.log('two');\n      try {\n        this.page +=1;\n        // this.isPostsLoading = true;\n        const response = await axios.get('https://jsonplaceholder.typicode.com/posts', {\n          params: {\n            _page: this.page,\n            _limit: this.limit,\n          }\n        });\n        this.totalPages = Math.ceil(response.headers['x-total-count'] / this.limit);\n        this.posts = [...this.posts, ...response.data];\n      } catch (error) {\n        alert('Ошибка');\n        console.log(error);\n      } finally {\n        // this.isPostsLoading = false;\n      }\n    },\n    changePage(pageNumber) {\n      this.page = pageNumber;\n      this.fetchPosts();\n    },\n  },\n  mounted() {\n    this.fetchPosts();\n  },\n  computed: {\n    sortedPosts () {\n      return [...this.posts].sort((post1, post2) => {\n        return post1[this.selectedSort]?.localeCompare(post2[this.selectedSort])\n      })\n    },\n    sortedAndSearchedPosts() {\n      return this.sortedPosts.filter(post => {\n        return post.title.toLowerCase().includes(this.searchQuery.toLowerCase());\n      })\n    } \n  },\n  // watch: {\n  //   selectedSort(newValue) {\n  //     this.posts.sort((post1, post2) => {\n  //       return post1[newValue]?.localeCompare(post2[newValue])\n  //     })\n  //   }\n  // }\n  // watch: {\n  //   page() {\n  //     this.fetchPosts();\n  //   }\n  // }\n}\n</script>\n\n<style>\nh1 {\n  margin-bottom: 24px;\n}\n.header {\n  margin-bottom: 24px;\n}\n.app__btns {\n  display: flex;\n  justify-content: space-between;\n}\n.pagination {\n  width: 600px;\n  max-width: 100%;\n  display: flex;\n  justify-content: center;\n  gap: 24px;\n  margin: auto;\n}\n.pagination__item {\n  padding: 12px;\n  border-radius: 8px;\n  margin: 16px 0;\n  border: 1px solid #ccc;\n  cursor: pointer;\n}\n.pagination__item:hover {\n  background: #ffdceb;\n}\n.pagination__item_current {\n  background: #fff3f8;\n}\n.observer {\n  height: 10px;\n  background: #ccc;\n}\n</style>"],"mappings":";;;EACOA,KAAK,EAAC;AAAW;gCACpBC,mBAAA,CAAgB,YAAZ,SAAO;;EAOND,KAAK,EAAC;AAAQ;gCACjBC,mBAAA,CAA2B,YAAvB,oBAAkB;;EAMjBD,KAAK,EAAC;AAAW;;EAiBnBA,KAAK,EAAC;AAAY;mBAjC3B;gCAoDIC,mBAAA,CAEM,c,aADJA,mBAAA,CAAoB,WAAjB,eAAa,E;;EAGkBD,KAAK,EAAC;AAAU;;;;;;;;;;uBAxDxDE,mBAAA,CAAAC,SAAA,SACEF,mBAAA,CAIM,OAJNG,UAIM,GAHJC,UAAgB,EAChBC,YAAA,CAAmEC,oBAAA;IAAvDC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,IAAA,CAAAC,OAAO,CAACC,IAAI;;IAHnCC,OAAA,EAAAC,QAAA,CAGmD,MAAQ,CAH3DC,gBAAA,CAGmD,UAAQ,E;IAH3DC,CAAA;MAIIX,YAAA,CAAyBY,qBAAA,E,GAI3BjB,mBAAA,CAiDM,cAhDJA,mBAAA,CAgBM,OAhBNkB,UAgBM,GAfJC,UAA2B,EAC3BC,mBAAA,kFAE+B,EAC/Bf,YAAA,CAAoEgB,mBAAA;IAA1DC,WAAW,EAAC,YAAY;IAdxCC,UAAA,EAckDC,KAAA,CAAAC,WAAW;IAd7D,uBAAAjB,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAckDe,KAAA,CAAAC,WAAW,GAAAhB,MAAA;2CAEvDT,mBAAA,CAQM,OARN0B,UAQM,GAPJrB,YAAA,CAEyBC,oBAAA;IADtBC,OAAK,EAAEoB,QAAA,CAAAC;EAAU;IAlB5Bf,OAAA,EAAAC,QAAA,CAmBS,MAAY,CAnBrBC,gBAAA,CAmBS,cAAY,E;IAnBrBC,CAAA;kCAoBQX,YAAA,CAGawB,oBAAA;IAvBrBN,UAAA,EAqBmBC,KAAA,CAAAM,YAAY;IArB/B,uBAAAtB,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAqBmBe,KAAA,CAAAM,YAAY,GAAArB,MAAA;IACpBsB,OAAO,EAAEP,KAAA,CAAAQ;0DAKhB3B,YAAA,CAIY4B,oBAAA;IAJOC,IAAI,EAAEV,KAAA,CAAAW,aAAa;IA3B1C,iBAAA3B,MAAA,QAAAA,MAAA,MAAAC,MAAA,IA2B6Be,KAAA,CAAAW,aAAa,GAAA1B,MAAA;;IA3B1CI,OAAA,EAAAC,QAAA,CA4BM,MAEE,CAFFT,YAAA,CAEE+B,oBAAA;MADCC,QAAM,EAAEV,QAAA,CAAAW;IAAU,uCACnBlB,mBAAA,gBAAmB,C;IA9B3BJ,CAAA;+BAiCIhB,mBAAA,CAYM,OAZNuC,UAYM,I,kBAXJtC,mBAAA,CAUMC,SAAA,QA5CZsC,WAAA,CAmC6BhB,KAAA,CAAAiB,UAAU,EAAxBC,UAAU;yBADnBzC,mBAAA,CAUM;MARH0C,GAAG,EAAED,UAAU;MAChB3C,KAAK,EArCb6C,eAAA,EAqCc,kBAAkB;oCACwBpB,KAAA,CAAAqB,IAAI,KAAKH;;MAGxDnC,OAAK,EAAAE,MAAA,IAAEkB,QAAA,CAAAmB,UAAU,CAACJ,UAAU;wBAE1BA,UAAU,gCA3CrBK,UAAA;qCAkDavB,KAAA,CAAAwB,cAAc,I,cAHvBC,YAAA,CAIEC,oBAAA;IAnDNP,GAAA;IAgDOQ,KAAK,EAAExB,QAAA,CAAAyB,sBAAsB;IAC7BC,QAAM,EAAE1B,QAAA,CAAA2B;mEAGXrD,mBAAA,CAEMC,SAAA;IAtDVyC,GAAA;EAAA,IAmDMvB,mBAAA,iEAAkE,EACpEmC,UAEM,C,mEAENvD,mBAAA,CAA2D,OAA3DwD,UAA2D,gC,0BAAtC7B,QAAA,CAAA8B,aAAa,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}